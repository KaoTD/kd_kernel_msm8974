--- include/trace/events/vmscan.h
+++ include/trace/events/vmscan.h
@@ -263,22 +263,30 @@ DECLARE_EVENT_CLASS(mm_vmscan_lru_isolate_template,
 		unsigned long nr_requested,
 		unsigned long nr_scanned,
 		unsigned long nr_taken,
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 		unsigned long nr_lumpy_taken,
 		unsigned long nr_lumpy_dirty,
 		unsigned long nr_lumpy_failed,
+#endif
 		isolate_mode_t isolate_mode,
 		int file),
 
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 	TP_ARGS(order, nr_requested, nr_scanned, nr_taken, nr_lumpy_taken, nr_lumpy_dirty, nr_lumpy_failed, isolate_mode, file),
+#else
+	TP_ARGS(order, nr_requested, nr_scanned, nr_taken, isolate_mode, file),
+#endif
 
 	TP_STRUCT__entry(
 		__field(int, order)
 		__field(unsigned long, nr_requested)
 		__field(unsigned long, nr_scanned)
 		__field(unsigned long, nr_taken)
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 		__field(unsigned long, nr_lumpy_taken)
 		__field(unsigned long, nr_lumpy_dirty)
 		__field(unsigned long, nr_lumpy_failed)
+#endif
 		__field(isolate_mode_t, isolate_mode)
 		__field(int, file)
 	),
@@ -288,22 +296,30 @@ DECLARE_EVENT_CLASS(mm_vmscan_lru_isolate_template,
 		__entry->nr_requested = nr_requested;
 		__entry->nr_scanned = nr_scanned;
 		__entry->nr_taken = nr_taken;
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 		__entry->nr_lumpy_taken = nr_lumpy_taken;
 		__entry->nr_lumpy_dirty = nr_lumpy_dirty;
 		__entry->nr_lumpy_failed = nr_lumpy_failed;
+#endif
 		__entry->isolate_mode = isolate_mode;
 		__entry->file = file;
 	),
 
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 	TP_printk("isolate_mode=%d order=%d nr_requested=%lu nr_scanned=%lu nr_taken=%lu contig_taken=%lu contig_dirty=%lu contig_failed=%lu file=%d",
+#else
+	TP_printk("isolate_mode=%d order=%d nr_requested=%lu nr_scanned=%lu nr_taken=%lu file=%d",
+#endif
 		__entry->isolate_mode,
 		__entry->order,
 		__entry->nr_requested,
 		__entry->nr_scanned,
 		__entry->nr_taken,
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 		__entry->nr_lumpy_taken,
 		__entry->nr_lumpy_dirty,
 		__entry->nr_lumpy_failed,
+#endif
 		__entry->file)
 );
 
@@ -313,13 +329,19 @@ DEFINE_EVENT(mm_vmscan_lru_isolate_template, mm_vmscan_lru_isolate,
 		unsigned long nr_requested,
 		unsigned long nr_scanned,
 		unsigned long nr_taken,
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 		unsigned long nr_lumpy_taken,
 		unsigned long nr_lumpy_dirty,
 		unsigned long nr_lumpy_failed,
+#endif
 		isolate_mode_t isolate_mode,
 		int file),
 
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 	TP_ARGS(order, nr_requested, nr_scanned, nr_taken, nr_lumpy_taken, nr_lumpy_dirty, nr_lumpy_failed, isolate_mode, file)
+#else
+	TP_ARGS(order, nr_requested, nr_scanned, nr_taken, isolate_mode, file)
+#endif
 
 );
 
@@ -329,13 +351,19 @@ DEFINE_EVENT(mm_vmscan_lru_isolate_template, mm_vmscan_memcg_isolate,
 		unsigned long nr_requested,
 		unsigned long nr_scanned,
 		unsigned long nr_taken,
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 		unsigned long nr_lumpy_taken,
 		unsigned long nr_lumpy_dirty,
 		unsigned long nr_lumpy_failed,
+#endif
 		isolate_mode_t isolate_mode,
 		int file),
 
+#ifndef CONFIG_DISABLE_LUMPY_RECLAIM
 	TP_ARGS(order, nr_requested, nr_scanned, nr_taken, nr_lumpy_taken, nr_lumpy_dirty, nr_lumpy_failed, isolate_mode, file)
+#else
+	TP_ARGS(order, nr_requested, nr_scanned, nr_taken, isolate_mode, file)
+#endif
 
 );
 
