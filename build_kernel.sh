#!/bin/bash
###############################################################################
#
#                           Kernel Build Script 
#
###############################################################################

##############################################################################
# set toolchain
##############################################################################

export ARCH=arm
export PATH=/home/kaotd/arm-eabi-4.7/bin:$PATH
export CROSS_COMPILE=arm-eabi-

##############################################################################
# make zImage
##############################################################################
mkdir -p ./obj/KERNEL_OBJ/
make O=./obj/KERNEL_OBJ/ ef59_defconfig
make -j8 CONFIG_NO_ERROR_ON_MISMATCH=y O=./obj/KERNEL_OBJ/ 2>&1

make CONFIG_NO_ERROR_ON_MISMATCH=y

arm-eabi-strip -g wlan.ko

##############################################################################
# Make dt.img & copy zImage
##############################################################################
# ./mkdt.sh

